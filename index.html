<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <meta name="apple-mobile-web-app-capable" content="yes">
Â  Â  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
Â  Â  <meta name="apple-mobile-web-app-title" content="Sunday">
Â  Â  <meta name="theme-color" content="#0f0f1a">
Â  Â  <title>Sunday V9.1 Blue</title>
Â  Â Â 
Â  Â  <link rel="apple-touch-icon" sizes="180x180" href="logosunday.jpg">
Â  Â  <link rel="icon" type="image/png" href="logosunday.jpg">
Â  Â Â 
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
Â  Â Â 
Â  Â  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
Â  Â  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
Â  Â Â 
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  /* ğŸ”µ æ¢å¤ç»å…¸çš„è“è‰²ä¸»é¢˜ (V3/V5 Style) */
Â  Â  Â  Â  Â  Â  --bg-primary: #0f0f1a;
Â  Â  Â  Â  Â  Â  --bg-secondary: #1a1a2e;
Â  Â  Â  Â  Â  Â  --bg-card: #16213e;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  --accent-primary: #00d4ff; /* ç»å…¸è“ */
Â  Â  Â  Â  Â  Â  --accent-secondary: #7b2cbf; /* ç´«è‰²ç‚¹ç¼€ */
Â  Â  Â  Â  Â  Â  --accent-glow: rgba(0, 212, 255, 0.5);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  --accent-success: #00ff88;
Â  Â  Â  Â  Â  Â  --accent-danger: #ff4757;
Â  Â  Â  Â  Â  Â  --accent-warning: #ff6b35;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  --text-primary: #ffffff;
Â  Â  Â  Â  Â  Â  --text-secondary: #a0a0b0;
Â  Â  Â  Â  Â  Â  --text-muted: #6b6b7b;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  --glass: rgba(255, 255, 255, 0.05);
Â  Â  Â  Â  Â  Â  --glass-border: rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  --radius-md: 16px;
Â  Â  Â  Â  Â  Â  --radius-lg: 24px;
Â  Â  Â  Â  }

Â  Â  Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Outfit', -apple-system, sans-serif;
Â  Â  Â  Â  Â  Â  background: var(--bg-primary);
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  -webkit-font-smoothing: antialiased;
Â  Â  Â  Â  }

Â  Â  Â  Â  .bg-gradient {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; right: 0; bottom: 0;
Â  Â  Â  Â  Â  Â  background:Â 
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(ellipse at 20% 20%, rgba(123, 44, 191, 0.15) 0%, transparent 50%),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(ellipse at 80% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
Â  Â  Â  Â  Â  Â  z-index: -1;
Â  Â  Â  Â  }

Â  Â  Â  Â  .app-container {
Â  Â  Â  Â  Â  Â  max-width: 500px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  padding-bottom: 100px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Header */
Â  Â  Â  Â  .header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  padding: 15px 0;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .logo { display: flex; align-items: center; gap: 12px; }

Â  Â  Â  Â  /* âœ… LOGO æ ·å¼æ›´æ–°ï¼šæ”¯æŒå›¾ç‰‡ */
Â  Â  Â  Â  .logo-icon {
Â  Â  Â  Â  Â  Â  width: 48px; height: 48px;
Â  Â  Â  Â  Â  Â  background: #000;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  overflow: hidden; /* åˆ‡å‰²æˆåœ†å½¢ */
Â  Â  Â  Â  Â  Â  border: 2px solid var(--accent-primary);
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px var(--accent-glow);
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .logo-icon img {
Â  Â  Â  Â  Â  Â  width: 100%; height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover; /* å……æ»¡åœ†å½¢ */
Â  Â  Â  Â  }

Â  Â  Â  Â  .logo-text h1 { font-size: 24px; font-weight: 700; }
Â  Â  Â  Â  .logo-text span { font-size: 11px; color: var(--text-muted); letter-spacing: 2px; }

Â  Â  Â  Â  .header-time { text-align: right; font-family: 'JetBrains Mono', monospace; }
Â  Â  Â  Â  .header-time .time { font-size: 24px; font-weight: 500; color: var(--accent-primary); }
Â  Â  Â  Â  .header-time .date { font-size: 12px; color: var(--text-secondary); }

Â  Â  Â  Â  /* Navigation */
Â  Â  Â  Â  .nav-tabs {
Â  Â  Â  Â  Â  Â  display: flex; gap: 6px; padding: 6px;
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  overflow-x: auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  .nav-tabs::-webkit-scrollbar { display: none; }

Â  Â  Â  Â  .nav-tab {
Â  Â  Â  Â  Â  Â  flex: 1; min-width: 55px; padding: 10px 6px;
Â  Â  Â  Â  Â  Â  border: none; background: transparent;
Â  Â  Â  Â  Â  Â  color: var(--text-secondary);
Â  Â  Â  Â  Â  Â  font-family: 'Outfit', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 9px; font-weight: 500;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  display: flex; flex-direction: column; align-items: center; gap: 3px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tab.active {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  .nav-tab .icon { font-size: 18px; }

Â  Â  Â  Â  /* Pages */
Â  Â  Â  Â  .page { display: none; animation: fadeIn 0.3s ease-out; }
Â  Â  Â  Â  .page.active { display: block; }

Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(10px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Cards */
Â  Â  Â  Â  .card {
Â  Â  Â  Â  Â  Â  background: var(--bg-card);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  padding: 18px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-header {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .card-title {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; gap: 10px;
Â  Â  Â  Â  Â  Â  font-size: 16px; font-weight: 600;
Â  Â  Â  Â  }

Â  Â  Â  Â  .badge {
Â  Â  Â  Â  Â  Â  padding: 5px 10px; border-radius: 15px;
Â  Â  Â  Â  Â  Â  font-size: 11px; font-weight: 500;
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  }

Â  Â  Â  Â  .badge.live { background: rgba(255, 71, 87, 0.2); color: var(--accent-danger); animation: pulse 2s infinite; }
Â  Â  Â  Â  .badge.tracking { background: rgba(0, 255, 136, 0.2); color: var(--accent-success); }

Â  Â  Â  Â  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

Â  Â  Â  Â  /* Stats Grid */
Â  Â  Â  Â  .stats-grid {
Â  Â  Â  Â  Â  Â  display: grid; grid-template-columns: repeat(4, 1fr);
Â  Â  Â  Â  Â  Â  gap: 8px; margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-item {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  padding: 12px 8px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stat-value { font-size: 18px; font-weight: 700; color: var(--accent-primary); }
Â  Â  Â  Â  .stat-label { font-size: 9px; color: var(--text-muted); margin-top: 2px; }

Â  Â  Â  Â  /* Weather */
Â  Â  Â  Â  .weather-main { display: flex; align-items: center; gap: 20px; padding: 10px 0; }
Â  Â  Â  Â  .weather-icon { font-size: 50px; }
Â  Â  Â  Â  .weather-temp { font-size: 38px; font-weight: 700; }
Â  Â  Â  Â  .weather-condition { color: var(--text-secondary); font-size: 14px; }

Â  Â  Â  Â  .weather-details {
Â  Â  Â  Â  Â  Â  display: grid; grid-template-columns: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  gap: 10px; margin-top: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .weather-detail {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  padding: 12px; border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .weather-detail .value { font-size: 16px; font-weight: 600; color: var(--accent-primary); }
Â  Â  Â  Â  .weather-detail .label { font-size: 10px; color: var(--text-muted); }

Â  Â  Â  Â  /* Location List */
Â  Â  Â  Â  .location-list { display: flex; flex-direction: column; gap: 8px; }

Â  Â  Â  Â  .location-card {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  padding: 12px; border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  .location-info { display: flex; align-items: center; gap: 10px; }
Â  Â  Â  Â  .location-name { font-weight: 500; font-size: 14px; }
Â  Â  Â  Â  .location-temp { font-size: 18px; font-weight: 600; color: var(--accent-primary); }

Â  Â  Â  Â  /* Input & Buttons */
Â  Â  Â  Â  .input-group { position: relative; margin-bottom: 12px; }

Â  Â  Â  Â  .input-field {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 14px 16px;
Â  Â  Â  Â  Â  Â  background: var(--bg-secondary);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  color: var(--text-primary);
Â  Â  Â  Â  Â  Â  font-family: 'Outfit', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .input-field:focus { outline: none; border-color: var(--accent-primary); }

Â  Â  Â  Â  /* âœ… æ™ºèƒ½æœç´¢åˆ—è¡¨ (Smart Search List) */
Â  Â  Â  Â  .search-results {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 100%; left: 0; right: 0;
Â  Â  Â  Â  Â  Â  background: var(--bg-card);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--accent-primary);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  z-index: 3000;
Â  Â  Â  Â  Â  Â  max-height: 250px;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 30px rgba(0,0,0,0.8);
Â  Â  Â  Â  }
Â  Â  Â  Â  .search-results.active { display: block; animation: slideDown 0.2s ease-out; }
Â  Â  Â  Â  @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

Â  Â  Â  Â  .search-item {
Â  Â  Â  Â  Â  Â  padding: 12px 15px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: background 0.2s;
Â  Â  Â  Â  }
Â  Â  Â  Â  .search-item:last-child { border-bottom: none; }
Â  Â  Â  Â  .search-item:hover { background: var(--glass); }
Â  Â  Â  Â  .search-item-name { font-weight: 500; font-size: 14px; color: var(--text-primary); }
Â  Â  Â  Â  .search-item-detail { font-size: 11px; color: var(--accent-primary); margin-top: 2px; }

Â  Â  Â  Â  .btn {
Â  Â  Â  Â  Â  Â  padding: 14px 24px; border: none;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  font-family: 'Outfit', sans-serif;
Â  Â  Â  Â  Â  Â  font-size: 14px; font-weight: 500;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center; gap: 8px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }

Â  Â  Â  Â  .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
Â  Â  Â  Â  .btn-secondary { background: var(--glass); color: var(--text-primary); border: 1px solid var(--glass-border); }
Â  Â  Â  Â  .btn-danger { background: linear-gradient(135deg, var(--accent-danger), #ff6b6b); color: white; }
Â  Â  Â  Â  .btn-success { background: linear-gradient(135deg, var(--accent-success), #00d68f); color: #0f0f1a; }

Â  Â  Â  Â  .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
Â  Â  Â  Â  .btn-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
Â  Â  Â  Â  .btn-sm { padding: 10px 16px; font-size: 12px; }

Â  Â  Â  Â  /* ==================== MAP STYLES ==================== */
Â  Â  Â  Â  .map-small-container {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 200px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-small-container::after {
Â  Â  Â  Â  Â  Â  content: 'ğŸ” Tap to Zoom';
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  bottom: 10px;
Â  Â  Â  Â  Â  Â  right: 10px;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.7);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 5px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  }

Â  Â  Â  Â  #journeyMapSmall, #parkingMap { width: 100%; height: 100%; }

Â  Â  Â  Â  /* Fullscreen Map */
Â  Â  Â  Â  .map-fullscreen {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; right: 0; bottom: 0;
Â  Â  Â  Â  Â  Â  z-index: 2000;
Â  Â  Â  Â  Â  Â  background: var(--bg-primary);
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-fullscreen.active { display: block; }

Â  Â  Â  Â  #journeyMapFull { width: 100%; height: 100%; }

Â  Â  Â  Â  /* Map Top Bar */
Â  Â  Â  Â  .map-top-bar {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0; left: 0; right: 0;
Â  Â  Â  Â  Â  Â  background: linear-gradient(180deg, rgba(15, 15, 26, 0.95) 0%, transparent 100%);
Â  Â  Â  Â  Â  Â  padding: 50px 20px 40px;
Â  Â  Â  Â  Â  Â  z-index: 2001;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-status-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-mode-icon {
Â  Â  Â  Â  Â  Â  width: 50px; height: 50px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-mode-info { flex: 1; }
Â  Â  Â  Â  .map-mode-title { font-size: 20px; font-weight: 700; }
Â  Â  Â  Â  .map-street { font-size: 13px; color: var(--text-secondary); margin-top: 3px; }

Â  Â  Â  Â  .map-close-btn {
Â  Â  Â  Â  Â  Â  width: 40px; height: 40px;
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 20px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-live-stats {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(4, 1fr);
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-stat {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  Â  Â  padding: 10px 5px;
Â  Â  Â  Â  Â  Â  border-radius: 12px;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-stat .value {
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: var(--accent-primary);
Â  Â  Â  Â  Â  Â  font-family: 'JetBrains Mono', monospace;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-stat .label { font-size: 9px; color: var(--text-muted); }

Â  Â  Â  Â  /* Map Bottom Bar */
Â  Â  Â  Â  .map-bottom-bar {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  bottom: 0; left: 0; right: 0;
Â  Â  Â  Â  Â  Â  background: linear-gradient(0deg, rgba(15, 15, 26, 0.98) 0%, transparent 100%);
Â  Â  Â  Â  Â  Â  padding: 40px 20px 40px;
Â  Â  Â  Â  Â  Â  z-index: 2001;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-duration {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-duration-label { font-size: 12px; color: var(--text-muted); }
Â  Â  Â  Â  .map-duration-time {
Â  Â  Â  Â  Â  Â  font-size: 36px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: var(--accent-success);
Â  Â  Â  Â  Â  Â  font-family: 'JetBrains Mono', monospace;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-controls {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-btn {
Â  Â  Â  Â  Â  Â  width: 55px; height: 55px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  font-size: 22px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.1);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  Â  }

Â  Â  Â  Â  .map-btn-end {
Â  Â  Â  Â  Â  Â  width: 70px; height: 70px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--accent-danger), #ff6b6b);
Â  Â  Â  Â  Â  Â  font-size: 28px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 30px rgba(255, 71, 87, 0.5);
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Timeline Panel */
Â  Â  Â  Â  .timeline-panel {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  bottom: 0; left: 0; right: 0;
Â  Â  Â  Â  Â  Â  background: var(--bg-card);
Â  Â  Â  Â  Â  Â  border-radius: 24px 24px 0 0;
Â  Â  Â  Â  Â  Â  max-height: 50%;
Â  Â  Â  Â  Â  Â  z-index: 2002;
Â  Â  Â  Â  Â  Â  transform: translateY(100%);
Â  Â  Â  Â  Â  Â  transition: transform 0.3s ease;
Â  Â  Â  Â  }

Â  Â  Â  Â  .timeline-panel.show { transform: translateY(0); }

Â  Â  Â  Â  .timeline-header {
Â  Â  Â  Â  Â  Â  padding: 15px 20px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  .timeline-header h3 { font-size: 16px; }
Â  Â  Â  Â  .timeline-close { background: none; border: none; color: var(--text-muted); font-size: 24px; cursor: pointer; }

Â  Â  Â  Â  .timeline-content {
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  max-height: calc(50vh - 60px);
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Timeline */
Â  Â  Â  Â  .timeline { position: relative; padding-left: 25px; }

Â  Â  Â  Â  .timeline::before {
Â  Â  Â  Â  Â  Â  content: ''; position: absolute;
Â  Â  Â  Â  Â  Â  left: 8px; top: 0; bottom: 0; width: 2px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary), transparent);
Â  Â  Â  Â  }

Â  Â  Â  Â  .timeline-item { position: relative; padding-bottom: 15px; }

Â  Â  Â  Â  .timeline-dot {
Â  Â  Â  Â  Â  Â  position: absolute; left: -21px; top: 5px;
Â  Â  Â  Â  Â  Â  width: 12px; height: 12px;
Â  Â  Â  Â  Â  Â  background: var(--accent-primary);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 10px var(--accent-primary);
Â  Â  Â  Â  }

Â  Â  Â  Â  .timeline-dot.walking { background: var(--accent-success); box-shadow: 0 0 10px var(--accent-success); }
Â  Â  Â  Â  .timeline-dot.driving { background: var(--accent-warning); box-shadow: 0 0 10px var(--accent-warning); }
Â  Â  Â  Â  .timeline-dot.resting { background: var(--accent-secondary); box-shadow: 0 0 10px var(--accent-secondary); }
Â  Â  Â  Â  .timeline-dot.active { animation: dotPulse 1.5s ease-in-out infinite; }

Â  Â  Â  Â  @keyframes dotPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }

Â  Â  Â  Â  .timeline-card {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  padding: 12px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  }

Â  Â  Â  Â  .timeline-title { font-weight: 600; font-size: 14px; }
Â  Â  Â  Â  .timeline-time { font-size: 11px; color: var(--text-muted); margin-top: 3px; }
Â  Â  Â  Â  .timeline-badge {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  padding: 3px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  font-size: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 6px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .timeline-badge.walking { background: rgba(0, 255, 136, 0.15); color: var(--accent-success); }
Â  Â  Â  Â  .timeline-badge.driving { background: rgba(255, 107, 53, 0.15); color: var(--accent-warning); }
Â  Â  Â  Â  .timeline-badge.resting { background: rgba(123, 44, 191, 0.15); color: var(--accent-secondary); }

Â  Â  Â  Â  /* Custom Map Marker */
Â  Â  Â  Â  .custom-marker {
Â  Â  Â  Â  Â  Â  width: 20px; height: 20px;
Â  Â  Â  Â  Â  Â  background: #4285F4;
Â  Â  Â  Â  Â  Â  border: 3px solid white;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px rgba(66, 133, 244, 0.8);
Â  Â  Â  Â  }

Â  Â  Â  Â  .custom-marker-photo {
Â  Â  Â  Â  Â  Â  /* Photo marker style */
Â  Â  Â  Â  Â  Â  background-size: cover;
Â  Â  Â  Â  Â  Â  background-position: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* History Card */
Â  Â  Â  Â  .history-card {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }

Â  Â  Â  Â  .history-header {
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between; align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .history-date { font-size: 12px; color: var(--accent-primary); }
Â  Â  Â  Â  .history-mode { font-size: 11px; padding: 3px 8px; border-radius: 10px; }
Â  Â  Â  Â  .history-mode.walking { background: rgba(0, 255, 136, 0.15); color: var(--accent-success); }
Â  Â  Â  Â  .history-mode.driving { background: rgba(255, 107, 53, 0.15); color: var(--accent-warning); }

Â  Â  Â  Â  .history-stats { display: flex; gap: 15px; flex-wrap: wrap; }
Â  Â  Â  Â  .history-stat { font-size: 12px; color: var(--text-secondary); }
Â  Â  Â  Â  .history-stat span { color: var(--text-primary); font-weight: 600; }

Â  Â  Â  Â  /* Other Styles */
Â  Â  Â  Â  .parking-display { text-align: center; padding: 20px; }
Â  Â  Â  Â  .parking-icon { font-size: 50px; margin-bottom: 10px; }
Â  Â  Â  Â  .parking-photo { max-width: 100%; border-radius: var(--radius-md); margin-bottom: 15px; }

Â  Â  Â  Â  .place-card {
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .place-photo { width: 100%; height: 100px; object-fit: cover; }
Â  Â  Â  Â  .place-info { padding: 12px; display: flex; justify-content: space-between; align-items: center; }
Â  Â  Â  Â  .place-name { font-weight: 600; }

Â  Â  Â  Â  .reminder-item {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; gap: 12px;
Â  Â  Â  Â  Â  Â  padding: 12px; background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .reminder-icon {
Â  Â  Â  Â  Â  Â  width: 38px; height: 38px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--accent-warning), #ff8c42);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .reminder-content { flex: 1; }
Â  Â  Â  Â  .reminder-task { font-weight: 500; font-size: 13px; }
Â  Â  Â  Â  .reminder-time { font-size: 11px; color: var(--text-muted); }
Â  Â  Â  Â  .reminder-delete { background: none; border: none; color: var(--text-muted); cursor: pointer; }

Â  Â  Â  Â  .rate-card {
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; justify-content: space-between;
Â  Â  Â  Â  Â  Â  padding: 12px; background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .rate-pair { display: flex; align-items: center; gap: 10px; }
Â  Â  Â  Â  .rate-flag { font-size: 20px; }
Â  Â  Â  Â  .rate-code { font-weight: 600; font-size: 13px; }
Â  Â  Â  Â  .rate-value { font-size: 16px; font-weight: 600; color: var(--accent-success); }

Â  Â  Â  Â  .alert-card {
Â  Â  Â  Â  Â  Â  padding: 12px; border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  margin-bottom: 10px; border-left: 4px solid;
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  }
Â  Â  Â  Â  .alert-card.danger { background: rgba(255, 71, 87, 0.1); border-color: var(--accent-danger); }
Â  Â  Â  Â  .alert-card.warning { background: rgba(255, 165, 0, 0.1); border-color: var(--accent-warning); }
Â  Â  Â  Â  .alert-card.info { background: rgba(0, 212, 255, 0.1); border-color: var(--accent-primary); }
Â  Â  Â  Â  .alert-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; }
Â  Â  Â  Â  .alert-title { font-weight: 600; font-size: 14px; display: flex; align-items: center; gap: 6px; }
Â  Â  Â  Â  .alert-time { font-size: 10px; color: var(--text-muted); }
Â  Â  Â  Â  .alert-body { font-size: 12px; color: var(--text-secondary); margin-top: 2px; }

Â  Â  Â  Â  /* Group Header */
Â  Â  Â  Â  .group-header {
Â  Â  Â  Â  Â  Â  font-size: 11px; font-weight: 700; color: var(--text-muted);
Â  Â  Â  Â  Â  Â  margin-top: 15px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .chat-messages {
Â  Â  Â  Â  Â  Â  height: 250px; overflow-y: auto;
Â  Â  Â  Â  Â  Â  padding: 15px; background: var(--bg-secondary);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  Â  Â  Â  margin-bottom: 12px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-message { margin-bottom: 12px; }
Â  Â  Â  Â  .chat-message.user { text-align: right; }
Â  Â  Â  Â  .chat-bubble {
Â  Â  Â  Â  Â  Â  display: inline-block; max-width: 85%;
Â  Â  Â  Â  Â  Â  padding: 10px 14px;
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-message.user .chat-bubble {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }
Â  Â  Â  Â  .chat-message.bot .chat-bubble { background: var(--glass); }
Â  Â  Â  Â  .chat-input-area { display: flex; gap: 10px; }
Â  Â  Â  Â  .chat-input-area .btn { width: auto; padding: 14px 18px; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Briefing Style */
Â  Â  Â  Â  .briefing-card {
Â  Â  Â  Â  Â  Â  border-left: 3px solid var(--accent-primary);
Â  Â  Â  Â  Â  Â  background: rgba(0, 212, 255, 0.05);
Â  Â  Â  Â  Â  Â  margin-bottom: 15px; padding: 12px; border-radius: var(--radius-md);
Â  Â  Â  Â  }
Â  Â  Â  Â  .briefing-title { font-weight: 700; color: var(--accent-primary); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
Â  Â  Â  Â  .briefing-row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 4px; padding-bottom: 4px; border-bottom: 1px solid rgba(255,255,255,0.05); }
Â  Â  Â  Â  .briefing-row:last-child { border-bottom: none; }
Â  Â  Â  Â  .briefing-footer { margin-top: 8px; font-size: 11px; color: var(--accent-success); font-style: italic; }

Â  Â  Â  Â  .command-list { margin-top: 15px; padding: 15px; background: var(--glass); border-radius: var(--radius-md); }
Â  Â  Â  Â  .command-title { font-size: 13px; font-weight: 600; color: var(--accent-primary); margin-bottom: 10px; }
Â  Â  Â  Â  .command-item { font-size: 11px; color: var(--text-secondary); margin-bottom: 5px; }
Â  Â  Â  Â  .command-item code { background: var(--bg-secondary); padding: 2px 6px; border-radius: 4px; color: var(--accent-primary); }

Â  Â  Â  Â  .empty-state { text-align: center; padding: 30px; }
Â  Â  Â  Â  .empty-icon { font-size: 40px; margin-bottom: 10px; opacity: 0.4; }
Â  Â  Â  Â  .empty-text { color: var(--text-muted); font-size: 12px; }

Â  Â  Â  Â  .loading { display: flex; justify-content: center; padding: 30px; }
Â  Â  Â  Â  .spinner {
Â  Â  Â  Â  Â  Â  width: 30px; height: 30px;
Â  Â  Â  Â  Â  Â  border: 3px solid var(--glass);
Â  Â  Â  Â  Â  Â  border-top-color: var(--accent-primary);
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  animation: spin 1s linear infinite;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes spin { to { transform: rotate(360deg); } }

Â  Â  Â  Â  .toast {
Â  Â  Â  Â  Â  Â  position: fixed; top: 20px; left: 20px; right: 20px;
Â  Â  Â  Â  Â  Â  padding: 14px 18px;
Â  Â  Â  Â  Â  Â  background: var(--bg-card);
Â  Â  Â  Â  Â  Â  border: 1px solid var(--accent-success);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-md);
Â  Â  Â  Â  Â  Â  z-index: 5000;
Â  Â  Â  Â  Â  Â  display: flex; align-items: center; gap: 10px;
Â  Â  Â  Â  Â  Â  transform: translateY(-150%);
Â  Â  Â  Â  Â  Â  transition: transform 0.4s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  .toast.show { transform: translateY(0); }
Â  Â  Â  Â  .toast.error { border-color: var(--accent-danger); }

Â  Â  Â  Â  .modal {
Â  Â  Â  Â  Â  Â  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
Â  Â  Â  Â  Â  Â  background: rgba(0, 0, 0, 0.8);
Â  Â  Â  Â  Â  Â  z-index: 4000;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  align-items: center; justify-content: center;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal.show { display: flex; }
Â  Â  Â  Â  .modal-content {
Â  Â  Â  Â  Â  Â  background: var(--bg-card);
Â  Â  Â  Â  Â  Â  border-radius: var(--radius-lg);
Â  Â  Â  Â  Â  Â  width: 100%; max-width: 400px;
Â  Â  Â  Â  Â  Â  max-height: 80vh;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-header {
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--glass-border);
Â  Â  Â  Â  Â  Â  display: flex; justify-content: space-between; align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .modal-title { font-size: 18px; font-weight: 600; }
Â  Â  Â  Â  .modal-close { background: none; border: none; color: var(--text-muted); font-size: 24px; cursor: pointer; }
Â  Â  Â  Â  .modal-body { padding: 20px; }

Â  Â  Â  Â  .fitness-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
Â  Â  Â  Â  .fitness-item { background: var(--glass); padding: 15px; border-radius: var(--radius-md); text-align: center; }
Â  Â  Â  Â  .fitness-icon { font-size: 24px; margin-bottom: 8px; }
Â  Â  Â  Â  .fitness-value { font-size: 20px; font-weight: 700; color: var(--accent-success); }
Â  Â  Â  Â  .fitness-label { font-size: 10px; color: var(--text-muted); }

Â  Â  Â  Â  .news-item { padding: 12px; background: var(--glass); border-radius: var(--radius-md); margin-bottom: 8px; cursor: pointer; }
Â  Â  Â  Â  .news-source { display: inline-block; padding: 2px 8px; background: var(--accent-primary); color: var(--bg-primary); border-radius: 10px; font-size: 9px; margin-bottom: 5px; }
Â  Â  Â  Â  .news-title { font-size: 13px; font-weight: 500; }

Â  Â  Â  Â  /* GPS Accuracy Indicator */
Â  Â  Â  Â  .gps-accuracy {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  gap: 8px;
Â  Â  Â  Â  Â  Â  padding: 8px 12px;
Â  Â  Â  Â  Â  Â  background: var(--glass);
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .gps-accuracy-dot {
Â  Â  Â  Â  Â  Â  width: 8px; height: 8px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  }

Â  Â  Â  Â  .gps-accuracy-dot.excellent { background: var(--accent-success); box-shadow: 0 0 8px var(--accent-success); }
Â  Â  Â  Â  .gps-accuracy-dot.good { background: var(--accent-primary); }
Â  Â  Â  Â  .gps-accuracy-dot.poor { background: var(--accent-warning); }
Â  Â  Â  Â  .gps-accuracy-dot.bad { background: var(--accent-danger); }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="bg-gradient"></div>

Â  Â  <div class="app-container">
Â  Â  Â  Â  <header class="header">
Â  Â  Â  Â  Â  Â  <div class="logo">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="logo-icon">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="logosunday.jpg" alt="S">
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="logo-text">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1>Sunday</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>AI ASSISTANT V9.1</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="header-time">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="time" id="currentTime">00:00</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="date" id="currentDate">Loading...</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </header>

Â  Â  Â  Â  <nav class="nav-tabs">
Â  Â  Â  Â  Â  Â  <button class="nav-tab active" data-page="dashboard"><span class="icon">ğŸ </span><span>Home</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="weather"><span class="icon">ğŸŒ¤ï¸</span><span>Weather</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="journey"><span class="icon">ğŸ—ºï¸</span><span>Journey</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="parking"><span class="icon">ğŸ…¿ï¸</span><span>Parking</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="tools"><span class="icon">ğŸ› ï¸</span><span>Tools</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="alerts"><span class="icon">ğŸš¨</span><span>Alerts</span></button>
Â  Â  Â  Â  Â  Â  <button class="nav-tab" data-page="chat"><span class="icon">ğŸ’¬</span><span>Chat</span></button>
Â  Â  Â  Â  </nav>

Â  Â  Â  Â  <div class="page active" id="page-dashboard">
Â  Â  Â  Â  Â  Â  <div id="dailyBriefing" class="briefing-card" style="display:none">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="briefing-title">ğŸ”” Morning Update</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="briefingContent"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="briefing-footer">Don't forget to drink some water! ğŸ’§</div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="stats-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="dashTemp">--Â°</div><div class="stat-label">Temp</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="dashAlerts">0</div><div class="stat-label">Alerts</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="dashJourneys">0</div><div class="stat-label">Journeys</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="dashReminders">0</div><div class="stat-label">Reminders</div></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸŒ¤ï¸ Weather</div><span class="badge live">â— LIVE</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-main" id="dashWeather">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-icon">â˜€ï¸</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div><div class="weather-temp">--Â°C</div><div class="weather-condition">Loading...</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸš¨ Recent Alerts</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="dashAlertsPreview"></div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸ“° News</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="dashNews"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-weather">
Â  Â  Â  Â  Â  Â  <div class="input-group">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="input-field" id="weatherSearch" placeholder="ğŸ” Search city (e.g. London)..." autocomplete="off">
Â  Â  Â  Â  Â  Â  Â  Â  <div id="searchResults" class="search-results"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-title">ğŸ“ <span id="weatherLocation">Johor Jaya</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="badge live">â— LIVE</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-main">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-icon" id="weatherIcon">â˜€ï¸</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div><div class="weather-temp"><span id="weatherTemp">--</span>Â°C</div><div class="weather-condition" id="weatherCondition">Loading...</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-details">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-detail"><div class="value" id="weatherWind">--</div><div class="label">Wind</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-detail"><div class="value" id="weatherHumidity">--</div><div class="label">Humidity</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="weather-detail"><div class="value" id="weatherRain">--</div><div class="label">Rain %</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸŒ Locations</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="location-list" id="monitoredLocations"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-journey">
Â  Â  Â  Â  Â  Â  <div class="card" id="activeJourneyCard" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-title">ğŸš— <span id="journeyModeText">Tracking</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="badge tracking">â— LIVE</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="gps-accuracy" id="gpsAccuracy">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="gps-accuracy-dot good" id="gpsAccuracyDot"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span id="gpsAccuracyText">GPS: Good</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="stats-grid" style="margin-top: 15px; grid-template-columns: repeat(3, 1fr);">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jDistance">0.0</div><div class="stat-label">km</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jSpeed">0</div><div class="stat-label">km/h</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jTime">0</div><div class="stat-label">min</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jPace">--</div><div class="stat-label">min/km</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jAlt">0</div><div class="stat-label">m (Alt)</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="stat-item"><div class="stat-value" id="jCalories">0</div><div class="stat-label">kcal</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-small-container" onclick="openFullscreenMap()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="journeyMapSmall"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="timeline" id="timelinePreview" style="max-height: 150px; overflow: hidden;"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="btn-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="openFullscreenMap()">ğŸ—ºï¸ Full Map</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-danger" onclick="endJourney()">ğŸ End</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card" id="startJourneyCard">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸš€ Start Journey</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="empty-state">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="empty-icon">ğŸ—ºï¸</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: 15px; font-weight: 600; margin-bottom: 8px;">Track Your Movement</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="empty-text">Mini-map tracking + Tap to zoom<br>Auto-detects walking/driving & tracks calories</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="startJourney()">ğŸ“ Start Journey</button>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸ“œ History</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="journeyHistory"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-parking">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸš— My Car</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="parkingDisplay">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="parking-display">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="parking-icon">ğŸš—</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="font-size: 14px;">No location saved</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-small-container" id="parkingMapContainer" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="parkingMap"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="btn-row-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary btn-sm" onclick="saveParking('gps')">ğŸ“ GPS</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary btn-sm" onclick="document.getElementById('photoInput').click()">ğŸ“¸ Photo</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary btn-sm" onclick="saveParking('both')">ğŸ“+ğŸ“¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="photoInput" accept="image/*" capture="environment" style="display:none" onchange="handlePhoto(event)">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">â­ Saved Places</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group"><input type="text" class="input-field" id="customPlaceName" placeholder="Name this place"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="saveCustomPlace()">ğŸ’¾ Save Place</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="customPlacesList" style="margin-top: 15px;"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-tools">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">â° Reminders</div><span class="badge" id="reminderBadge">0</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-secondary" onclick="enableNotifications()" style="margin-bottom: 10px;">ğŸ”” Enable Alerts on iPhone</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="input-group"><input type="text" class="input-field" id="reminderTask" placeholder="What to remind?"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="btn-row" style="margin-bottom: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select class="input-field" id="reminderTime">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="10">10 mins</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="30">30 mins</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="60">1 hour</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="120">2 hours</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="480">8 hours</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="1440">24 hours</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="addReminder()">â° Set</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="reminderList"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸ’± Currency (vs MYR)</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="currencyRates"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸ“° News</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="newsList"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-alerts">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸŒ Global Weather Watch</div><span class="badge live">â— LIVE</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="globalWeatherAlerts"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸš¨ Earthquake Monitor</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="earthquakeAlerts"><div class="loading"><div class="spinner"></div></div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="page" id="page-chat">
Â  Â  Â  Â  Â  Â  <div class="card">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="card-header"><div class="card-title">ğŸ’¬ Chat</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div id="chatBriefing" class="briefing-card" style="display:none; margin: 15px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="briefing-title">ğŸ”” Morning Update</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="chatBriefingContent"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chat-messages" id="chatMessages">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="chat-message bot"><div class="chat-bubble">Hi! ğŸ‘‹ I'm Sunday. I monitor weather and earthquakes for you.</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chat-input-area">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" class="input-field" id="chatInput" placeholder="Type..." onkeypress="if(event.key==='Enter')sendChat()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn btn-primary" onclick="sendChat()">â¤</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="map-fullscreen" id="mapFullscreen">
Â  Â  Â  Â  <div id="journeyMapFull"></div>
Â  Â  Â  Â  <div class="map-top-bar">
Â  Â  Â  Â  Â  Â  <div class="map-status-row">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-mode-icon" id="fsModeIcon">ğŸš¶</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-mode-info">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-mode-title" id="fsModeTitle">Walking</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-street" id="fsStreet">Detecting location...</div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="map-close-btn" onclick="closeFullscreenMap()">âœ•</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="map-live-stats" style="grid-template-columns: repeat(3, 1fr);">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsDistance">0.0</div><div class="label">km</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsSpeed">0</div><div class="label">km/h</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsTime">0</div><div class="label">min</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsPace">--</div><div class="label">Pace</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsAlt">0</div><div class="label">Alt (m)</div></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-stat"><div class="value" id="fsCalories">0</div><div class="label">kcal</div></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="map-bottom-bar">
Â  Â  Â  Â  Â  Â  <div class="map-duration">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-duration-label">Duration</div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="map-duration-time" id="fsDuration">00:00</div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="map-controls">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="map-btn" onclick="toggleTimelinePanel()">ğŸ“‹</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="map-btn" onclick="document.getElementById('journeyPhotoInput').click()">ğŸ“·</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="map-btn map-btn-end" onclick="endJourney()">ğŸ</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="map-btn" onclick="centerMapOnUser()">ğŸ“</button>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="journeyPhotoInput" accept="image/*" capture="environment" style="display:none" onchange="addJourneyPhoto(event)">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="timeline-panel" id="timelinePanel">
Â  Â  Â  Â  Â  Â  <div class="timeline-header"><h3>ğŸ“œ Timeline</h3><button class="timeline-close" onclick="toggleTimelinePanel()">Ã—</button></div>
Â  Â  Â  Â  Â  Â  <div class="timeline-content"><div class="timeline" id="fsTimeline"></div></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="toast" id="toast"><span class="toast-icon">âœ…</span><span class="toast-message">Success!</span></div>

Â  Â  <div class="modal" id="historyModal">
Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  <div class="modal-header"><div class="modal-title">ğŸ“œ Journey Details</div><button class="modal-close" onclick="closeModal()">Ã—</button></div>
Â  Â  Â  Â  Â  Â  <div class="modal-body" id="historyModalBody"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const APP = { journey: null, watchId: null, mapSmall: null, mapFull: null, markerSmall: null, markerFull: null, pathSmall: null, pathFull: null, pathCoords: [], parkingMap: null, reminders: [], parking: null, customPlaces: {}, journeyHistory: [], pendingPhoto: null, timerInterval: null, isFullscreen: false };
Â  Â  Â  Â  const LOCATIONS = { 'Johor Jaya': { lat: 1.5360, lon: 103.7930 }, 'Iskandar Puteri': { lat: 1.4190, lon: 103.6350 }, 'Singapore': { lat: 1.3521, lon: 103.8198 }, 'Tokyo': { lat: 35.6895, lon: 139.6917 }, 'London': { lat: 51.5074, lon: -0.1278 } };
Â  Â  Â  Â  const GLOBAL_MONITOR = [{n:'Tokyo', lat:35.6895, lon:139.6917}, {n:'New York', lat:40.7128, lon:-74.0060}, {n:'London', lat:51.5074, lon:-0.1278}, {n:'Dubai', lat:25.2769, lon:55.2962}, {n:'Sydney', lat:-33.8688, lon:151.2093}, {n:'Shanghai', lat:31.2304, lon:121.4737}, {n:'Singapore', lat:1.3521, lon:103.8198}, {n:'Paris', lat:48.8566, lon:2.3522}, {n:'Beijing', lat:39.9042, lon:116.4074}, {n:'Seoul', lat:37.5665, lon:126.9780}, {n:'Hokkaido', lat:43.2203, lon:142.8635}];
Â  Â  Â  Â  const CURRENCIES = [{ code: 'USD', flag: 'ğŸ‡ºğŸ‡¸' }, { code: 'SGD', flag: 'ğŸ‡¸ğŸ‡¬' }, { code: 'EUR', flag: 'ğŸ‡ªğŸ‡º' }, { code: 'GBP', flag: 'ğŸ‡¬ğŸ‡§' }, { code: 'JPY', flag: 'ğŸ‡¯ğŸ‡µ' }, { code: 'CNY', flag: 'ğŸ‡¨ğŸ‡³' }];

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  Â  Â  Â  loadStorage(); initNav(); updateClock(); setInterval(updateClock, 1000);
Â  Â  Â  Â  Â  Â  loadWeather(); loadNews(); loadCurrency(); loadEarthquakes(); loadGlobalWeatherAlerts();
Â  Â  Â  Â  Â  Â  renderReminders(); renderParking(); renderHistory(); renderPlaces(); generateDailyBriefing();
Â  Â  Â  Â  Â  Â  setInterval(checkReminders, 10000); setInterval(loadEarthquakes, 300000);
Â  Â  Â  Â  Â  Â  if ('Notification' in window) Notification.requestPermission();
Â  Â  Â  Â  });

Â  Â  Â  Â  function loadStorage() {
Â  Â  Â  Â  Â  Â  try { APP.reminders = JSON.parse(localStorage.getItem('sun_rem') || '[]'); APP.parking = JSON.parse(localStorage.getItem('sun_park') || 'null'); APP.customPlaces = JSON.parse(localStorage.getItem('sun_places') || '{}'); APP.journeyHistory = JSON.parse(localStorage.getItem('sun_hist') || '[]'); } catch(e) {}
Â  Â  Â  Â  }
Â  Â  Â  Â  function saveStorage() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('sun_rem', JSON.stringify(APP.reminders)); localStorage.setItem('sun_park', JSON.stringify(APP.parking)); localStorage.setItem('sun_places', JSON.stringify(APP.customPlaces)); localStorage.setItem('sun_hist', JSON.stringify(APP.journeyHistory));
Â  Â  Â  Â  }
Â  Â  Â  Â  function initNav() {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.nav-tab').forEach(t => t.addEventListener('click', () => { document.querySelectorAll('.nav-tab').forEach(x => x.classList.remove('active')); document.querySelectorAll('.page').forEach(x => x.classList.remove('active')); t.classList.add('active'); document.getElementById('page-' + t.dataset.page).classList.add('active'); }));
Â  Â  Â  Â  }
Â  Â  Â  Â  function updateClock() {
Â  Â  Â  Â  Â  Â  const now = new Date(); document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false }); document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
Â  Â  Â  Â  }

Â  Â  Â  Â  async function generateDailyBriefing() {
Â  Â  Â  Â  Â  Â  let content = ''; content += `<div class="briefing-row"><strong>ğŸŒ¥ï¸ Sky Status (VIP Zones):</strong></div>`;
Â  Â  Â  Â  Â  Â  for (const [n, c] of Object.entries(LOCATIONS)) { if(n === 'London') break; try { const d = await (await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${c.lat}&longitude=${c.lon}&current=temperature_2m,weather_code`)).json(); const cond = getWeatherCond(d.current.weather_code); content += `<div class="briefing-row"><span>â€¢ ${n}</span><span>${cond.icon} ${d.current.temperature_2m}Â°C</span></div>`; } catch(e) {} }
Â  Â  Â  Â  Â  Â  content += `<div class="briefing-row" style="margin-top:10px"><strong>ğŸ’° Rates:</strong></div>`; try { const r = await (await fetch('https://api.exchangerate-api.com/v4/latest/SGD')).json(); content += `<div class="briefing-row"><span>SGD 1 â‰ˆ RM ${(r.rates.MYR).toFixed(2)}</span></div>`; } catch(e) {}
Â  Â  Â  Â  Â  Â  document.getElementById('briefingContent').innerHTML = content; document.getElementById('chatBriefingContent').innerHTML = content; document.getElementById('dailyBriefing').style.display = 'block'; document.getElementById('chatBriefing').style.display = 'block';
Â  Â  Â  Â  }

Â  Â  Â  Â  async function loadWeather() {
Â  Â  Â  Â  Â  Â  await updateWeather('Johor Jaya', 1.536, 103.793);
Â  Â  Â  Â  Â  Â  const container = document.getElementById('monitoredLocations'); container.innerHTML = '';
Â  Â  Â  Â  Â  Â  for (const [n, c] of Object.entries(LOCATIONS)) { try { const d = await (await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${c.lat}&longitude=${c.lon}&current=temperature_2m,weather_code`)).json(); const cond = getWeatherCond(d.current.weather_code); container.innerHTML += `<div class="location-card" onclick="updateWeather('${n}',${c.lat},${c.lon})"><div class="location-info"><span style="font-size:20px">${cond.icon}</span><span class="location-name">${n}</span></div><span class="location-temp">${Math.round(d.current.temperature_2m)}Â°</span></div>`; } catch(e) {} }
Â  Â  Â  Â  }

Â  Â  Â  Â  async function updateWeather(name, lat, lon) {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const d = await (await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code,wind_speed_10m,relative_humidity_2m&hourly=precipitation_probability`)).json();
Â  Â  Â  Â  Â  Â  Â  Â  const temp = Math.round(d.current.temperature_2m); const cond = getWeatherCond(d.current.weather_code);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('weatherLocation').textContent = name; document.getElementById('weatherTemp').textContent = temp; document.getElementById('weatherIcon').textContent = cond.icon; document.getElementById('weatherCondition').textContent = cond.text; document.getElementById('weatherWind').textContent = Math.round(d.current.wind_speed_10m); document.getElementById('weatherHumidity').textContent = d.current.relative_humidity_2m; document.getElementById('weatherRain').textContent = d.hourly.precipitation_probability[0] || 0; document.getElementById('dashTemp').textContent = temp + 'Â°'; document.getElementById('dashWeather').innerHTML = `<div class="weather-icon">${cond.icon}</div><div><div class="weather-temp">${temp}Â°C</div><div class="weather-condition">${name}</div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  return `${cond.icon} ${name}: ${temp}Â°C`;
Â  Â  Â  Â  Â  Â  } catch(e) { return 'Error'; }
Â  Â  Â  Â  }

Â  Â  Â  Â  function getWeatherCond(code) {
Â  Â  Â  Â  Â  Â  if (code === 0) return { icon: 'â˜€ï¸', text: 'Clear' }; if (code <= 3) return { icon: 'â›…', text: 'Cloudy' }; if (code >= 95) return { icon: 'â›ˆï¸', text: 'Storm' }; if (code >= 61) return { icon: 'ğŸŒ§ï¸', text: 'Rain' }; if (code >= 51) return { icon: 'ğŸŒ¦ï¸', text: 'Drizzle' }; if (code >= 71) return { icon: 'â„ï¸', text: 'Snow' }; return { icon: 'â˜ï¸', text: 'Cloudy' };
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==================== NEW SMART SEARCH ====================
Â  Â  Â  Â  const searchInput = document.getElementById('weatherSearch');
Â  Â  Â  Â  const searchResults = document.getElementById('searchResults');

Â  Â  Â  Â  searchInput.addEventListener('keyup', async (e) => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  const query = e.target.value.trim();
Â  Â  Â  Â  Â  Â  Â  Â  if (!query) return;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  searchResults.innerHTML = '<div class="search-item"><div class="search-item-detail">Searching...</div></div>';
Â  Â  Â  Â  Â  Â  Â  Â  searchResults.classList.add('active');

Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const r = await (await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(query)}&count=10&language=en&format=json`)).json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!r.results || r.results.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  searchResults.innerHTML = '<div class="search-item"><div class="search-item-name">No results found</div></div>';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  searchResults.innerHTML = r.results.map(item => `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="search-item" onclick="selectLocation('${item.name}', ${item.latitude}, ${item.longitude}, '${item.admin1 || ''}', '${item.country || ''}')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="search-item-name">${item.name} ${item.country_code ? getFlagEmoji(item.country_code) : ''}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="search-item-detail">${item.admin1 ? item.admin1 + ', ' : ''}${item.country || ''}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `).join('');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } catch(err) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  searchResults.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Click outside to close list
Â  Â  Â  Â  document.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  if (!e.target.closest('.input-group')) searchResults.classList.remove('active');
Â  Â  Â  Â  });

Â  Â  Â  Â  function selectLocation(name, lat, lon, region, country) {
Â  Â  Â  Â  Â  Â  // Keep specific name selected from list
Â  Â  Â  Â  Â  Â  updateWeather(name, lat, lon);
Â  Â  Â  Â  Â  Â  searchInput.value = `${name}, ${country}`;
Â  Â  Â  Â  Â  Â  searchResults.classList.remove('active');
Â  Â  Â  Â  }

Â  Â  Â  Â  function getFlagEmoji(countryCode) {
Â  Â  Â  Â  Â  Â  const codePoints = countryCode.toUpperCase().split('').map(char =>Â  127397 + char.charCodeAt());
Â  Â  Â  Â  Â  Â  return String.fromCodePoint(...codePoints);
Â  Â  Â  Â  }

Â  Â  Â  Â  // ==================== GLOBAL ALERTS ====================
Â  Â  Â  Â  async function loadGlobalWeatherAlerts() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('globalWeatherAlerts'); let alertsFound = false; let html = '';
Â  Â  Â  Â  Â  Â  for (const city of GLOBAL_MONITOR) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const d = await (await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current=weather_code&hourly=weather_code,precipitation&forecast_days=1`)).json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const curr = d.current.weather_code; const hourlyCodes = d.hourly.weather_code; const hourlyRain = d.hourly.precipitation; const totalRain = hourlyRain.reduce((a, b) => a + b, 0);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let msg = ""; let type = "info";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if ([95, 96, 99].includes(curr)) { msg = "âš¡ LIVE ALERT: Heavy Thunderstorm occurring RIGHT NOW!"; type = "danger"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if ([71, 73, 75, 85, 86].includes(curr)) { msg = "â„ï¸ LIVE ALERT: It is SNOWING right now! ğŸ¥¶"; type = "warning"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if ([63, 65, 80, 81, 82].includes(curr)) { msg = "ğŸŒ§ LIVE ALERT: Heavy Rain detected currently!"; type = "info"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!msg) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (hourlyCodes.some(c => [96, 99].includes(c))) { msg = "ğŸŒªï¸ FUTURE WARNING: Extreme storm risk in next 24h."; type = "danger"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (totalRain >= 50.0) { msg = `ğŸŒŠ FLOOD RISK: Heavy continuous rain predicted (${totalRain.toFixed(1)}mm).`; type = "danger"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (hourlyCodes.some(c => [71, 75].includes(c))) { msg = "â„ï¸ SNOW FORECAST: Snowfall expected within 24 hours."; type = "warning"; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (msg) { alertsFound = true; html += `<div class="alert-card ${type}"><div class="alert-header"><div class="alert-title">ğŸš¨ ${city.n}</div></div><div class="alert-body">${msg}</div></div>`; }
Â  Â  Â  Â  Â  Â  Â  Â  } catch(e) {}
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if(!alertsFound) html = '<div class="alert-card info"><div class="alert-body">âœ… No global severe weather detected.</div></div>';
Â  Â  Â  Â  Â  Â  container.innerHTML = html;
Â  Â  Â  Â  }

Â  Â  Â  Â  async function loadEarthquakes() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const quakes = (await (await fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.geojson')).json()).features;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('dashAlerts').textContent = quakes.length;
Â  Â  Â  Â  Â  Â  Â  Â  const container = document.getElementById('earthquakeAlerts');
Â  Â  Â  Â  Â  Â  Â  Â  if(!quakes.length) { container.innerHTML = '<div class="alert-card info"><div class="alert-title">âœ… No earthquakes</div></div>'; return; }
Â  Â  Â  Â  Â  Â  Â  Â  let html = ''; let todayHeaderAdded = false; let otherHeaderAdded = false; const today = new Date().toDateString();
Â  Â  Â  Â  Â  Â  Â  Â  quakes.slice(0, 15).forEach(q => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const d = new Date(q.properties.time); const isToday = d.toDateString() === today;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dateStr = d.toLocaleString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute:'numeric', hour12: true });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(isToday && !todayHeaderAdded) { html += '<div class="group-header">ğŸ“… Today</div>'; todayHeaderAdded = true; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if(!isToday && !otherHeaderAdded) { html += '<div class="group-header">ğŸ“… Yesterday / Older</div>'; otherHeaderAdded = true; }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += `<div class="alert-card ${q.properties.mag >= 6 ? 'danger' : 'warning'}"><div class="alert-header"><div class="alert-title">${q.properties.mag >= 6 ? 'ğŸš¨' : 'ğŸŒ'} M${q.properties.mag.toFixed(1)}</div><div class="alert-time">${dateStr}</div></div><div class="alert-body">ğŸ“ ${q.properties.place}</div></div>`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = html;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('dashAlertsPreview').innerHTML = quakes.slice(0, 2).map(q => `<div class="alert-card ${q.properties.mag >= 6 ? 'danger' : 'info'}"><div class="alert-title">${q.properties.mag >= 6 ? 'ğŸš¨' : 'ğŸŒ'} M${q.properties.mag.toFixed(1)} - ${q.properties.place?.split(',')[0]}</div></div>`).join('') || '<div class="alert-card info"><div class="alert-title">âœ… All Clear</div></div>';
Â  Â  Â  Â  Â  Â  } catch(e) {}
Â  Â  Â  Â  }

Â  Â  Â  Â  function enableNotifications() {
Â  Â  Â  Â  Â  Â  if (!("Notification" in window)) { showToast("âŒ Notifications not supported", true); return; }
Â  Â  Â  Â  Â  Â  Notification.requestPermission().then(permission => { if (permission === "granted") { showToast("âœ… Notifications Allowed!"); new Notification("Sunday", { body: "Test: I can warn you about rain now!" }); } else { showToast("âŒ Permission denied", true); } });
Â  Â  Â  Â  }

Â  Â  Â  Â  function startJourney() {
Â  Â  Â  Â  Â  Â  if (!navigator.geolocation) return showToast('GPS not supported', true);
Â  Â  Â  Â  Â  Â  navigator.geolocation.getCurrentPosition(pos => {
Â  Â  Â  Â  Â  Â  Â  Â  const lat = pos.coords.latitude, lon = pos.coords.longitude, acc = pos.coords.accuracy;
Â  Â  Â  Â  Â  Â  Â  Â  APP.journey = { startTime: Date.now(), lastLat: lat, lastLon: lon, lastTime: Date.now(), totalKm: 0, calories: 0, speed: 0, mode: 'walking', currentAlt: pos.coords.altitude || 0, overspeedWarning: false, waypoints: [{ name: 'ğŸš© Start', lat, lon, time: Date.now(), type: 'start' }], currentStop: null };
Â  Â  Â  Â  Â  Â  Â  Â  APP.pathCoords = [[lat, lon]];
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('startJourneyCard').style.display = 'none'; document.getElementById('activeJourneyCard').style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  APP.mapSmall = L.map('journeyMapSmall', { zoomControl: false, attributionControl: false }).setView([lat, lon], 17); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(APP.mapSmall);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const icon = L.divIcon({ className: '', html: '<div style="width:16px;height:16px;background:#4285F4;border:3px solid white;border-radius:50%;box-shadow:0 0 10px rgba(66,133,244,0.8)"></div>', iconSize: [16, 16], iconAnchor: [8, 8] });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  APP.markerSmall = L.marker([lat, lon], { icon }).addTo(APP.mapSmall); APP.pathSmall = L.polyline(APP.pathCoords, { color: '#4285F4', weight: 4 }).addTo(APP.mapSmall); L.marker([lat, lon]).addTo(APP.mapSmall).bindPopup('ğŸš© Start');
Â  Â  Â  Â  Â  Â  Â  Â  }, 100);
Â  Â  Â  Â  Â  Â  Â  Â  APP.watchId = navigator.geolocation.watchPosition(trackPosition, err => updateGPSStatus('Error', 'bad'), { enableHighAccuracy: true, maximumAge: 2000, timeout: 10000 });
Â  Â  Â  Â  Â  Â  Â  Â  APP.timerInterval = setInterval(updateTimer, 1000); updateGPSStatus(acc); showToast('Journey started! ğŸš—');
Â  Â  Â  Â  Â  Â  }, err => showToast('GPS Error: ' + err.message, true), { enableHighAccuracy: true, timeout: 15000 });
Â  Â  Â  Â  }

Â  Â  Â  Â  function trackPosition(pos) {
Â  Â  Â  Â  Â  Â  if (!APP.journey) return;
Â  Â  Â  Â  Â  Â  const lat = pos.coords.latitude, lon = pos.coords.longitude; const acc = pos.coords.accuracy; const alt = pos.coords.altitude || 0; const now = Date.now();
Â  Â  Â  Â  Â  Â  const dist = calcDist(APP.journey.lastLat, APP.journey.lastLon, lat, lon); const timeDiff = (now - APP.journey.lastTime) / 1000 / 3600;
Â  Â  Â  Â  Â  Â  let speed = timeDiff > 0 ? dist / timeDiff : 0; if (speed > 300) speed = APP.journey.speed;
Â  Â  Â  Â  Â  Â  APP.journey.speed = speed; APP.journey.currentAlt = alt;
Â  Â  Â  Â  Â  Â  if (speed > 110) { if (!APP.journey.overspeedWarning) { if (navigator.vibrate) navigator.vibrate([200, 100, 200]); showToast('âš ï¸ Speeding Alert! > 110km/h', true); APP.journey.overspeedWarning = true; } } else { APP.journey.overspeedWarning = false; }
Â  Â  Â  Â  Â  Â  const prevMode = APP.journey.mode; APP.journey.mode = speed > 15 ? 'driving' : 'walking'; updateGPSStatus(acc);
Â  Â  Â  Â  Â  Â  APP.pathCoords.push([lat, lon]);
Â  Â  Â  Â  Â  Â  if (APP.mapSmall && APP.markerSmall) { APP.markerSmall.setLatLng([lat, lon]); APP.pathSmall.setLatLngs(APP.pathCoords); APP.mapSmall.panTo([lat, lon]); }
Â  Â  Â  Â  Â  Â  if (APP.isFullscreen && APP.mapFull && APP.markerFull) { APP.markerFull.setLatLng([lat, lon]); APP.pathFull.setLatLngs(APP.pathCoords); APP.mapFull.panTo([lat, lon]); }
Â  Â  Â  Â  Â  Â  if (dist > 0.005) {
Â  Â  Â  Â  Â  Â  Â  Â  if (prevMode !== APP.journey.mode && APP.journey.totalKm > 0.05) { APP.journey.waypoints.push({ name: APP.journey.mode === 'driving' ? 'ğŸš— Driving Mode' : 'ğŸš¶ Walking Mode', lat, lon, time: now, type: 'mode', mode: APP.journey.mode }); }
Â  Â  Â  Â  Â  Â  Â  Â  if (APP.journey.currentStop) { const dur = Math.round((now - APP.journey.currentStop.startTime) / 60000); if (dur >= 2) { APP.journey.waypoints.push({ name: `â¸ï¸ Stopped ${dur}min`, lat: APP.journey.currentStop.lat, lon: APP.journey.currentStop.lon, duration: dur, type: 'stop', time: APP.journey.currentStop.startTime }); if(APP.mapFull) L.marker([APP.journey.currentStop.lat, APP.journey.currentStop.lon]).addTo(APP.mapFull).bindPopup(`Stopped ${dur} min`); } APP.journey.currentStop = null; }
Â  Â  Â  Â  Â  Â  Â  Â  APP.journey.totalKm += dist; if (APP.journey.mode === 'walking') APP.journey.calories += dist * 65; APP.journey.lastLat = lat; APP.journey.lastLon = lon; APP.journey.lastTime = now; getStreetName(lat, lon);
Â  Â  Â  Â  Â  Â  } else if (!APP.journey.currentStop && APP.journey.totalKm > 0.01) { APP.journey.currentStop = { lat, lon, startTime: now }; }
Â  Â  Â  Â  Â  Â  updateJourneyUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateJourneyUI() {
Â  Â  Â  Â  Â  Â  if (!APP.journey) return;
Â  Â  Â  Â  Â  Â  const j = APP.journey; let pace = "--"; if (j.speed > 1) { const paceMin = 60 / j.speed; const pm = Math.floor(paceMin); const ps = Math.round((paceMin - pm) * 60); pace = `${pm}'${ps}"`; }
Â  Â  Â  Â  Â  Â  document.getElementById('jDistance').textContent = j.totalKm.toFixed(2); document.getElementById('jSpeed').textContent = j.speed.toFixed(1); document.getElementById('jCalories').textContent = Math.round(j.calories); document.getElementById('jAlt').textContent = Math.round(j.currentAlt || 0); document.getElementById('jPace').textContent = pace; document.getElementById('journeyModeText').textContent = j.mode === 'driving' ? 'ğŸš— Driving' : 'ğŸš¶ Walking';
Â  Â  Â  Â  Â  Â  document.getElementById('fsDistance').textContent = j.totalKm.toFixed(2); document.getElementById('fsSpeed').textContent = j.speed.toFixed(1); document.getElementById('fsCalories').textContent = Math.round(j.calories); document.getElementById('fsAlt').textContent = Math.round(j.currentAlt || 0); document.getElementById('fsPace').textContent = pace; document.getElementById('fsModeIcon').textContent = j.mode === 'driving' ? 'ğŸš—' : 'ğŸš¶'; document.getElementById('fsModeTitle').textContent = j.mode === 'driving' ? 'Driving' : 'Walking'; renderTimeline();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateTimer() { if (!APP.journey) return; const secs = Math.floor((Date.now() - APP.journey.startTime) / 1000); const mins = Math.floor(secs / 60), s = secs % 60; const str = `${mins.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`; document.getElementById('jTime').textContent = mins; document.getElementById('fsTime').textContent = mins; document.getElementById('fsDuration').textContent = str; }
Â  Â  Â  Â  function updateGPSStatus(acc, status) { let quality = 'good', text = 'GPS: Good'; if (typeof acc === 'number') { if (acc <= 10) { quality = 'excellent'; text = `GPS: Excellent (Â±${Math.round(acc)}m)`; } else if (acc <= 30) { quality = 'good'; text = `GPS: Good (Â±${Math.round(acc)}m)`; } else if (acc <= 100) { quality = 'poor'; text = `GPS: Poor (Â±${Math.round(acc)}m)`; } else { quality = 'bad'; text = `GPS: Weak (Â±${Math.round(acc)}m)`; } } else if (status === 'bad') { quality = 'bad'; text = 'GPS: Error'; } document.getElementById('gpsAccuracyDot').className = 'gps-accuracy-dot ' + quality; document.getElementById('gpsAccuracyText').textContent = text; }
Â  Â  Â  Â  async function getStreetName(lat, lon) { try { const d = await (await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=18`)).json(); const street = d.address?.road || d.address?.suburb || 'Unknown'; document.getElementById('fsStreet').textContent = street; } catch(e) {} }
Â  Â  Â  Â  function calcDist(lat1, lon1, lat2, lon2) { const R = 6371, dLat = (lat2-lat1)*Math.PI/180, dLon = (lon2-lon1)*Math.PI/180; const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2; return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); }
Â  Â  Â  Â  function renderTimeline() { if (!APP.journey) return; const html = APP.journey.waypoints.map((w, i) => ` <div class="timeline-item"> <div class="timeline-dot ${w.mode || ''} ${i === APP.journey.waypoints.length - 1 ? 'active' : ''}"></div> <div class="timeline-card"> <div class="timeline-title">${w.name}</div> <div class="timeline-time">${new Date(w.time).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}</div> ${w.duration ? `<span class="timeline-badge resting">${w.duration} min</span>` : ''} ${w.photo ? `<img src="${w.photo}" style="width:100%;margin-top:5px;border-radius:8px">` : ''} </div> </div> `).join(''); document.getElementById('timelinePreview').innerHTML = `<div class="timeline">${html}</div>`; document.getElementById('fsTimeline').innerHTML = html; }
Â  Â  Â  Â  function addJourneyPhoto(e) { if (!APP.journey) return; const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = ev => { const photoData = ev.target.result; const lat = APP.journey.lastLat; const lon = APP.journey.lastLon; APP.journey.waypoints.push({ name: 'ğŸ“¸ Photo', lat: lat, lon: lon, time: Date.now(), type: 'photo', photo: photoData }); if (APP.mapFull) { const photoIcon = L.divIcon({ className: 'custom-marker-photo', html: `<div style="width:30px;height:30px;background:url(${photoData});background-size:cover;border-radius:50%;border:2px solid white;box-shadow:0 2px 5px rgba(0,0,0,0.5)"></div>`, iconSize: [30, 30] }); L.marker([lat, lon], { icon: photoIcon }).addTo(APP.mapFull).bindPopup(`<img src="${photoData}" style="width:100px;border-radius:8px">`); } renderTimeline(); showToast('Photo added! ğŸ“¸'); }; reader.readAsDataURL(file); }
Â  Â  Â  Â  function exportGPX(journeyId) { const journey = APP.journeyHistory.find(j => j.id === journeyId); if (!journey) return showToast('Error finding journey', true); let gpx = `<?xml version="1.0" encoding="UTF-8"?><gpx version="1.1" creator="SundayApp"><metadata><name>Journey ${new Date(journey.date).toLocaleDateString()}</name></metadata><trk><name>Sunday Track</name><trkseg>`; const points = journey.pathCoords || journey.waypoints; points.forEach(p => { const lat = p.lat || p[0]; const lon = p.lon || p[1]; gpx += `<trkpt lat="${lat}" lon="${lon}"><time>${new Date(p.time || journey.id).toISOString()}</time></trkpt>`; }); gpx += `</trkseg></trk></gpx>`; const blob = new Blob([gpx], { type: 'application/gpx+xml' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `journey_${journeyId}.gpx`; document.body.appendChild(a); a.click(); document.body.removeChild(a); showToast('GPX Downloaded! ğŸ“‚'); }
Â  Â  Â  Â  function openFullscreenMap() { if (!APP.journey) return; APP.isFullscreen = true; document.getElementById('mapFullscreen').classList.add('active'); setTimeout(() => { if (APP.mapFull) APP.mapFull.remove(); APP.mapFull = L.map('journeyMapFull', { zoomControl: false }).setView([APP.journey.lastLat, APP.journey.lastLon], 17); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(APP.mapFull); const icon = L.divIcon({ className: '', html: '<div style="width:20px;height:20px;background:#4285F4;border:4px solid white;border-radius:50%;box-shadow:0 0 15px rgba(66,133,244,0.8)"></div>', iconSize: [20, 20], iconAnchor: [10, 10] }); APP.markerFull = L.marker([APP.journey.lastLat, APP.journey.lastLon], { icon }).addTo(APP.mapFull); APP.pathFull = L.polyline(APP.pathCoords, { color: '#4285F4', weight: 5 }).addTo(APP.mapFull); L.marker([APP.journey.waypoints[0].lat, APP.journey.waypoints[0].lon]).addTo(APP.mapFull).bindPopup('ğŸš© Start'); APP.journey.waypoints.forEach(w => { if (w.type === 'stop') L.marker([w.lat, w.lon]).addTo(APP.mapFull).bindPopup(`â¸ï¸ ${w.duration} min`); if (w.type === 'photo') { const photoIcon = L.divIcon({ className: 'custom-marker-photo', html: `<div style="width:30px;height:30px;background:url(${w.photo});background-size:cover;border-radius:50%;border:2px solid white;box-shadow:0 2px 5px rgba(0,0,0,0.5)"></div>`, iconSize: [30, 30] }); L.marker([w.lat, w.lon], { icon: photoIcon }).addTo(APP.mapFull).bindPopup(`<img src="${w.photo}" style="width:100px;border-radius:8px">`); } }); }, 100); }
Â  Â  Â  Â  function closeFullscreenMap() { APP.isFullscreen = false; document.getElementById('mapFullscreen').classList.remove('active'); document.getElementById('timelinePanel').classList.remove('show'); }
Â  Â  Â  Â  function centerMapOnUser() { if (APP.journey && APP.mapFull) { APP.mapFull.setView([APP.journey.lastLat, APP.journey.lastLon], 17); } }
Â  Â  Â  Â  function toggleTimelinePanel() { document.getElementById('timelinePanel').classList.toggle('show'); }
Â  Â  Â  Â  function endJourney() { if (!APP.journey) return; if (APP.watchId) navigator.geolocation.clearWatch(APP.watchId); if (APP.timerInterval) clearInterval(APP.timerInterval); const j = APP.journey; const totalMins = Math.round((Date.now() - j.startTime) / 60000); const avgSpeed = totalMins > 0 ? (j.totalKm / (totalMins / 60)).toFixed(1) : 0; APP.journeyHistory.unshift({ id: Date.now(), date: new Date().toISOString(), distance: parseFloat(j.totalKm.toFixed(2)), duration: totalMins, calories: Math.round(j.calories), avgSpeed: parseFloat(avgSpeed), mode: avgSpeed > 12 ? 'driving' : 'walking', waypoints: j.waypoints, pathCoords: APP.pathCoords, startLat: j.waypoints[0].lat, startLon: j.waypoints[0].lon, endLat: j.lastLat, endLon: j.lastLon }); if (APP.journeyHistory.length > 30) APP.journeyHistory = APP.journeyHistory.slice(0, 30); APP.parking = { type: 'gps', lat: j.lastLat, lon: j.lastLon, time: Date.now() }; saveStorage(); if (APP.mapSmall) { APP.mapSmall.remove(); APP.mapSmall = null; } if (APP.mapFull) { APP.mapFull.remove(); APP.mapFull = null; } APP.journey = null; APP.pathCoords = []; APP.isFullscreen = false; document.getElementById('mapFullscreen').classList.remove('active'); document.getElementById('activeJourneyCard').style.display = 'none'; document.getElementById('startJourneyCard').style.display = 'block'; renderHistory(); renderParking(); document.getElementById('dashJourneys').textContent = APP.journeyHistory.length; showToast(`Done! ${j.totalKm.toFixed(2)}km, ${Math.round(j.calories)}kcal ğŸ`); }
Â  Â  Â  Â  function renderHistory() { const c = document.getElementById('journeyHistory'); document.getElementById('dashJourneys').textContent = APP.journeyHistory.length; if (!APP.journeyHistory.length) { c.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ“­</div><div class="empty-text">No journeys yet</div></div>'; return; } c.innerHTML = APP.journeyHistory.slice(0, 10).map(j => ` <div class="history-card" onclick="showHistoryDetail(${j.id})"> <div class="history-header"> <span class="history-date">${new Date(j.date).toLocaleDateString()}</span> <span class="history-mode ${j.mode}">${j.mode === 'driving' ? 'ğŸš—' : 'ğŸš¶'}</span> </div> <div class="history-stats"> <div class="history-stat">ğŸ“ <span>${j.distance}km</span></div> <div class="history-stat">â±ï¸ <span>${j.duration}min</span></div> <div class="history-stat">ğŸ”¥ <span>${j.calories}kcal</span></div> </div> </div> `).join(''); }
Â  Â  Â  Â  function showHistoryDetail(id) { const j = APP.journeyHistory.find(x => x.id === id); if (!j) return; document.getElementById('historyModalBody').innerHTML = ` <div class="fitness-grid"> <div class="fitness-item"><div class="fitness-icon">${j.mode === 'driving' ? 'ğŸš—' : 'ğŸš¶'}</div><div class="fitness-value">${j.distance}</div><div class="fitness-label">km</div></div> <div class="fitness-item"><div class="fitness-icon">â±ï¸</div><div class="fitness-value">${j.duration}</div><div class="fitness-label">min</div></div> <div class="fitness-item"><div class="fitness-icon">ğŸ”¥</div><div class="fitness-value">${j.calories}</div><div class="fitness-label">kcal</div></div> <div class="fitness-item"><div class="fitness-icon">âš¡</div><div class="fitness-value">${j.avgSpeed}</div><div class="fitness-label">km/h</div></div> </div> <div class="btn-row"> <a href="https://www.google.com/maps/dir/${j.startLat},${j.startLon}/${j.endLat},${j.endLon}" target="_blank" class="btn btn-primary">ğŸ—ºï¸ View Route</a> <button class="btn btn-secondary" onclick="exportGPX(${j.id})">ğŸ“‚ Export GPX</button> </div> `; document.getElementById('historyModal').classList.add('show'); }
Â  Â  Â  Â  function closeModal() { document.getElementById('historyModal').classList.remove('show'); }
Â  Â  Â  Â  function handlePhoto(e) { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = ev => { APP.pendingPhoto = ev.target.result; if (APP.pendingSaveMode === 'both') completeBothSave(); else { APP.parking = { type: 'photo', photo: APP.pendingPhoto, time: Date.now() }; saveStorage(); renderParking(); showToast('Photo saved! ğŸ“¸'); } }; reader.readAsDataURL(file); }
Â  Â  Â  Â  function saveParking(type) { APP.pendingSaveMode = type; if (type === 'photo') { document.getElementById('photoInput').click(); return; } navigator.geolocation.getCurrentPosition(pos => { if (type === 'gps') { APP.parking = { type: 'gps', lat: pos.coords.latitude, lon: pos.coords.longitude, time: Date.now() }; saveStorage(); renderParking(); showToast('GPS saved! ğŸ…¿ï¸'); } else { APP.pendingGPS = { lat: pos.coords.latitude, lon: pos.coords.longitude }; document.getElementById('photoInput').click(); } }, err => showToast('GPS Error', true), { enableHighAccuracy: true }); }
Â  Â  Â  Â  function completeBothSave() { APP.parking = { type: 'both', lat: APP.pendingGPS.lat, lon: APP.pendingGPS.lon, photo: APP.pendingPhoto, time: Date.now() }; saveStorage(); renderParking(); showToast('GPS + Photo saved! ğŸ…¿ï¸ğŸ“¸'); }
Â  Â  Â  Â  function renderParking() { const c = document.getElementById('parkingDisplay'); const mc = document.getElementById('parkingMapContainer'); if (!APP.parking) { c.innerHTML = '<div class="parking-display"><div class="parking-icon">ğŸš—</div><div>No location saved</div></div>'; mc.style.display = 'none'; return; } let html = '<div class="parking-display">'; if (APP.parking.photo) html += `<img src="${APP.parking.photo}" class="parking-photo">`; html += `<div style="font-size:14px;font-weight:600">${APP.parking.lat ? 'ğŸ“ GPS Saved' : 'ğŸ“¸ Photo Saved'}</div>`; html += `<div style="font-size:12px;color:var(--text-muted);margin:5px 0">${getTimeAgo(APP.parking.time)}</div>`; if (APP.parking.lat) html += `<a href="https://www.google.com/maps?q=${APP.parking.lat},${APP.parking.lon}" target="_blank" class="btn btn-success btn-sm" style="margin:10px 0">ğŸ—ºï¸ Open Maps</a>`; html += `<button class="btn btn-secondary btn-sm" onclick="APP.parking=null;saveStorage();renderParking()">ğŸ—‘ï¸ Clear</button></div>`; c.innerHTML = html; if (APP.parking.lat) { mc.style.display = 'block'; setTimeout(() => { if (APP.parkingMap) APP.parkingMap.remove(); APP.parkingMap = L.map('parkingMap', { zoomControl: false }).setView([APP.parking.lat, APP.parking.lon], 17); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(APP.parkingMap); L.marker([APP.parking.lat, APP.parking.lon]).addTo(APP.parkingMap).bindPopup('ğŸš—').openPopup(); }, 100); } else mc.style.display = 'none'; }
Â  Â  Â  Â  function saveCustomPlace() { const name = document.getElementById('customPlaceName').value.trim(); if (!name || !APP.parking?.lat) return showToast('Save GPS first', true); APP.customPlaces[name] = { lat: APP.parking.lat, lon: APP.parking.lon, photo: APP.parking.photo || null }; saveStorage(); document.getElementById('customPlaceName').value = ''; showToast(`"${name}" saved! â­`); renderPlaces(); }
Â  Â  Â  Â  function renderPlaces() { const c = document.getElementById('customPlacesList'); const p = Object.entries(APP.customPlaces); if (!p.length) { c.innerHTML = ''; return; } c.innerHTML = p.map(([n, d]) => ` <div class="place-card"> ${d.photo ? `<img src="${d.photo}" class="place-photo">` : ''} <div class="place-info"> <div class="place-name">â­ ${n}</div> <button class="btn btn-secondary btn-sm" style="width:auto" onclick="window.open('https://www.google.com/maps?q=${d.lat},${d.lon}')">ğŸ—ºï¸</button> </div> </div> `).join(''); }
Â  Â  Â  Â  function addReminder(task, mins) { task = task || document.getElementById('reminderTask').value.trim(); mins = mins || parseInt(document.getElementById('reminderTime').value); if (!task) return showToast('Enter task', true); APP.reminders.push({ id: Date.now(), task, triggerTime: Date.now() + mins * 60000 }); saveStorage(); document.getElementById('reminderTask').value = ''; renderReminders(); showToast(`Reminder: ${mins} mins â°`); return `âœ… ${task} in ${mins} mins`; }
Â  Â  Â  Â  function renderReminders() { const active = APP.reminders.filter(r => r.triggerTime > Date.now()); document.getElementById('reminderBadge').textContent = active.length; document.getElementById('dashReminders').textContent = active.length; document.getElementById('reminderList').innerHTML = active.length ? active.map(r => ` <div class="reminder-item"> <div class="reminder-icon">â°</div> <div class="reminder-content"> <div class="reminder-task">${r.task}</div> <div class="reminder-time">${getTimeUntil(r.triggerTime)}</div> </div> <button class="reminder-delete" onclick="APP.reminders=APP.reminders.filter(x=>x.id!==${r.id});saveStorage();renderReminders()">âœ•</button> </div> `).join('') : '<div class="empty-state"><div class="empty-text">No reminders</div></div>'; }
Â  Â  Â  Â  function checkReminders() { const now = Date.now(); APP.reminders.filter(r => r.triggerTime <= now).forEach(r => { showToast(`â° ${r.task}`, false, 8000); if (Notification.permission === 'granted') new Notification('Sunday', { body: r.task }); }); APP.reminders = APP.reminders.filter(r => r.triggerTime > now); saveStorage(); renderReminders(); }
Â  Â  Â  Â  let rates = {}; async function loadCurrency() { try { rates = (await (await fetch('https://api.exchangerate-api.com/v4/latest/MYR')).json()).rates; document.getElementById('currencyRates').innerHTML = CURRENCIES.map(c => ` <div class="rate-card"> <div class="rate-pair"><span class="rate-flag">${c.flag}</span><div class="rate-code">${c.code}/MYR</div></div> <span class="rate-value">${(1/rates[c.code]).toFixed(4)}</span> </div> `).join(''); } catch(e) {} }
Â  Â  Â  Â  let news = []; async function loadNews() { try { news = (await (await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://www.thestar.com.my/rss/news/nation')).json()).items?.slice(0, 5) || []; const html = news.map(n => `<div class="news-item" onclick="window.open('${n.link}')"><span class="news-source">NEWS</span><div class="news-title">${n.title}</div></div>`).join(''); document.getElementById('dashNews').innerHTML = html; document.getElementById('newsList').innerHTML = html; } catch(e) {} }
Â  Â  Â  Â  function sendChat() { const input = document.getElementById('chatInput'); const text = input.value.trim(); if (!text) return; addMsg(text, 'user'); input.value = ''; processCmd(text).then(r => addMsg(r, 'bot')); }
Â  Â  Â  Â  function addMsg(text, type) { const c = document.getElementById('chatMessages'); c.innerHTML += `<div class="chat-message ${type}"><div class="chat-bubble">${text}</div></div>`; c.scrollTop = c.scrollHeight; }
Â  Â  Â  Â  const MEDICAL = { stomach: { kw: ['stomach', 'gastric'], reply: 'ğŸ¤¢ Ginger tea, avoid spicy food, rest upright.' }, fever: { kw: ['fever', 'hot'], reply: 'ğŸ¤’ Drink water, cool towel, Paracetamol.' }, headache: { kw: ['headache', 'head'], reply: 'ğŸ§  Drink water, dark room, cold compress.' }, flu: { kw: ['flu', 'cold', 'cough'], reply: 'ğŸ¤§ Rest, warm soup, Vitamin C.' } };
Â  Â  Â  Â  async function processCmd(text) { const t = text.toLowerCase(); if (t.startsWith('weather ')) { return await updateWeather(text.slice(8), 0, 0); } if (t === 'weather') { document.querySelector('[data-page="weather"]').click(); return 'ğŸŒ¤ï¸ Weather page'; } const m = t.match(/remind.*?(\d+)\s*(min|hour|h|m).*?(?:to)?\s*(.+)/i); if (m) { let mins = parseInt(m[1]); if (m[2]?.startsWith('h')) mins *= 60; return addReminder(m[3], mins); } if (t.includes('car') || t.includes('parking')) { document.querySelector('[data-page="parking"]').click(); return APP.parking?.lat ? 'ğŸš— Opening parking...' : 'âŒ No parking saved'; } if (t.includes('start') && t.includes('journey')) { setTimeout(startJourney, 500); return 'ğŸš— Starting...'; } if (t === 'news') return news[0]?.title || 'No news'; if (t.startsWith('rate ')) { const c = t.split(' ')[1].toUpperCase(); return rates[c] ? `${c}: ${(1/rates[c]).toFixed(4)} MYR` : 'Not found'; } for (const [, d] of Object.entries(MEDICAL)) if (d.kw.some(k => t.includes(k))) return d.reply; return 'Try: weather tokyo, remind me in 30 mins to call'; }
Â  Â  Â  Â  function getTimeAgo(t) { const s = Math.floor((Date.now() - t) / 1000); if (s < 60) return 'just now'; if (s < 3600) return `${Math.floor(s/60)} mins ago`; if (s < 86400) return `${Math.floor(s/3600)} hours ago`; return `${Math.floor(s/86400)} days ago`; }
Â  Â  Â  Â  function getTimeUntil(t) { const s = Math.floor((t - Date.now()) / 1000); if (s < 60) return `${s}s`; if (s < 3600) return `${Math.floor(s/60)}m`; return `${Math.floor(s/3600)}h`; }
Â  Â  Â  Â  function showToast(msg, err = false, dur = 3000) { const t = document.getElementById('toast'); t.querySelector('.toast-icon').textContent = err ? 'âŒ' : 'âœ…'; t.querySelector('.toast-message').textContent = msg; t.classList.toggle('error', err); t.classList.add('show'); setTimeout(() => t.classList.remove('show'), dur); }
Â  Â  </script>
</body>
</html> 
